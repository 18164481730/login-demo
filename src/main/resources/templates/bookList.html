<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <script type="text/javascript" th:src="@{https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js}"></script>
        <link th:href="@{https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css}" rel="stylesheet"/>
        <link th:href="@{/css/default.css}" rel="stylesheet"/>
        <link rel="icon" th:href="@{/images/favicon.ico}" type="image/x-icon"/>
        <meta charset="UTF-8"/>
        <title>书籍列表</title>
        <script type="text/javascript">
        	//删除
        	function deleteBook(id){
        		$.ajax({
                    type:"post",
                    url:"book/deleteBook",
                    cache: false,
                    contentType: "application/json",
                    data: JSON.stringify(id),
                    success:function(r){
                    	alert(r.msg);
                    	window.location.href = "book";
                    },
                    error:function(){
                    	
                    }
                });
        	}
        	//跳转更新页面
        	function updateBook(id){
        		window.location.href = "book/showUpdatePage?id="+ id;
        	}
        </script>
    </head>

    <body>

        <div class="contentDiv">

            <h5>Spring Boot 测试案例</h5>

            <table class="table table-hover table-condensed">
                <legend>
                    <strong>书籍列表</strong>
                </legend>
                <thead>
                    <tr>
                        <th>主键ID</th>
                        <th>书名</th>
                        <th>作者</th>
                        <th>描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="book:${books}">
                        <td scope="row" th:text="${book.id}"></td>
                        <td>
                        	<a th:onclick="'javascript:updateBook(\''+${book.id}+'\')'" th:text="${book.bookName}"></a>
                        </td>
                        <td th:text="${book.author}"></td>
                        <td th:text="${book.title}"></td>
                        <td><a class="btn btn-danger" th:onclick="'javascript:deleteBook(\''+${book.id}+'\')'">删除</a></td>
                    </tr>
                </tbody>
            </table>

            <div><a class="btn btn-primary" href="book/showAddPage" role="button">创建用户</a></div>
        </div>

    </body>
</html>